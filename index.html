<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toxicology Flashcards</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body {
            touch-action: pan-y; /* Prevent vertical scroll interference during swipe */
        }
        .perspective-1000 { perspective: 1000px; }
        .preserve-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes bounce-left {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(-3px); }
        }
        @keyframes bounce-right {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(3px); }
        }
        .animate-bounce-left { animation: bounce-left 1s infinite; }
        .animate-bounce-right { animation: bounce-right 1s infinite; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icons as inline SVGs for portability
        const Icons = {
            ChevronLeft: () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m15 18-6-6 6-6"/></svg>
            ),
            ChevronRight: () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m9 18 6-6-6-6"/></svg>
            ),
            RotateCcw: () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
            ),
            BookOpen: () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
            ),
            Layers: () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"/><path d="m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"/><path d="m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"/></svg>
            )
        };

        const ToxicologyFlashcards = () => {
            const flashcardsData = [
                // --- Part 1: General Principles & Decontamination ---
                { id: 1, topic: "General Principles", front: "What is the first priority in assessing a poisoned patient?", back: "Recording vital signs (blood pressure, heart rate, respirations, body temperature)." },
                { id: 2, topic: "General Principles", front: "What is the second priority in assessment?", back: "Assessment of neurological function and level of consciousness." },
                { id: 3, topic: "Lab Analysis", front: "Which fluids are useful for toxicological analysis?", back: "Blood, urine, and vomitus." },
                { id: 4, topic: "Dilution", front: "What is the recommended dilution dosage for children and adults?", back: "Child: 1–2 cupfuls.\nAdult: 2–3 cupfuls." },
                { id: 5, topic: "Dilution", front: "What is the risk of excessive liquid during dilution?", back: "Distending the stomach wall, causing premature evacuation into the duodenum (making removal harder)." },
                { id: 6, topic: "Emesis", front: "List the contraindications for inducing vomiting.", back: "Convulsants, hydrocarbons, corrosives, sharp objects, nontoxic substances, unconsciousness, severe CV disease, emphysema, recent surgery, hemorrhagic diathesis, previously vomited, age < 6 months." },
                { id: 7, topic: "Syrup of Ipecac", front: "What is the mechanism of action for Ipecac?", back: "Early phase (within 30 min): Direct GI stimulant action.\nLate phase (>30 min): Stimulation of the Chemoreceptor Trigger Zone (CTZ)." },
                { id: 8, topic: "Syrup of Ipecac", front: "What are the adverse effects of Ipecac?", back: "Protracted vomiting, diarrhea, lethargy, diaphoresis, and fever." },
                { id: 9, topic: "Apomorphine", front: "How does Apomorphine work and how fast is it?", back: "Direct stimulation of the CTZ; produces emesis rapidly within 3–5 minutes." },
                { id: 10, topic: "Soap Solution", front: "How is dish-washing liquid used for emesis?", back: "2–3 tablespoons in 6–8 ounces of water. (Note: Laundry or electric dishwasher detergents are corrosive and should NOT be used)." },
                { id: 11, topic: "Gastric Lavage", front: "When is lavage indicated?", back: "When poisons must be removed quickly or when emesis is contraindicated." },
                { id: 12, topic: "Gastric Lavage", front: "What airway protection is required for lavage in Stage 4 coma?", back: "A cuffed endotracheal or nasotracheal tube to reduce aspiration risk." },
                { id: 13, topic: "Gastric Lavage", front: "What position should the patient be in?", back: "Left lateral decubitus position." },
                { id: 14, topic: "Gastric Lavage", front: "Why is Saline recommended over water for children?", back: "To prevent electrolyte imbalance." },
                { id: 15, topic: "Activated Charcoal", front: "What is the optimal timing for administration?", back: "Within 30 minutes of poison ingestion." },
                { id: 16, topic: "Activated Charcoal", front: "What is the purpose of adding Sorbitol?", back: "It improves taste and produces catharsis (shortens transit time of the charcoal-poison complex)." },
                { id: 17, topic: "Cathartics", front: "When are cathartics contraindicated?", back: "Strongly corrosive poisons, electrolyte disturbance, or absent bowel sounds." },
                { id: 18, topic: "Whole Bowel Irrigation", front: "What solution is used and why?", back: "Colyte (sodium sulfate + polyethylene glycol electrolyte solution). It is not absorbed and avoids fluid/electrolyte imbalance." },
                { id: 19, topic: "Demulcents", front: "What can be used for corrosive/irritating ingestions?", back: "Ice cream, milk, or egg whites (source of protein)." },
                { id: 20, topic: "Ocular Decontamination", front: "How should eyes be treated after contamination?", back: "Irrigation with lukewarm water for at least 15–20 minutes." },
                { id: 21, topic: "Urinary pH", front: "What is the goal of altering urinary pH?", back: "To increase the amount of the ionized (polar) form of the drug in the kidney, trapping it in the tubule for excretion." },
                { id: 22, topic: "Alkaline Diuresis", front: "Which drugs are removed by alkalinizing the urine (using Sodium Bicarbonate)?", back: "Weak acids such as Salicylates and Phenobarbital." },
                { id: 23, topic: "Acid Diuresis", front: "Which drugs are theoretically removed by acidifying the urine (using Ammonium Chloride)?", back: "Weak bases such as Amphetamines, Phencyclidine, and Quinidine. (Note: This is no longer used)." },
                { id: 24, topic: "Hemoperfusion", front: "When is Hemoperfusion superior to Hemodialysis?", back: "For compounds that are lipid soluble, protein bound, or poorly dialyzable." },
                { id: 25, topic: "Antidote Types", front: "Give an example of a Chemical Antidote.", back: "Calcium salts reacting with oxalic acid to form Calcium Oxalate." },
                { id: 26, topic: "Antidote Types", front: "Give an example of a Receptor Antidote.", back: "Naloxone (reverses morphine); Atropine (cholinergic blockade)." },
                { id: 27, topic: "Antidote Types", front: "Give an example of a Dispositional Antagonism.", back: "N-Acetylcysteine (provides sulfhydryl groups for Acetaminophen metabolism)." },
                { id: 28, topic: "Antidote Types", front: "Give an example of a Functional Antagonism.", back: "Epinephrine reversing bronchoconstriction in anaphylaxis." },

                // --- Part 2: Factors Influencing Toxicity ---
                { id: 29, topic: "Route of Admin", front: "Order the routes from most to least rapid onset.", back: "IV > Inhalation > Intraperitoneal > Subcutaneous > Intramuscular > Intradermal > Oral > Topical." },
                { id: 30, topic: "Inhalation Toxicity", front: "Which gases are considered Toxic Vapors?", back: "Carbon monoxide, hydrogen sulfide, sulfur oxides, and nitrogen oxides." },
                { id: 31, topic: "Metabolism", front: "What happens with Methanol metabolism?", back: "It is metabolized to compounds that are more active/toxic than the parent compound." },
                { id: 32, topic: "Genetics", front: "What happens to patients with atypical pseudocholinesterase when given Succinylcholine?", back: "Initial detoxification is hampered, leading to prolonged apnea and skeletal muscle relaxation (lasting hours)." },
                { id: 33, topic: "Genetics: G6PD", front: "What is the mechanism of hemolysis in G6PD deficiency?", back: "Inability to generate NADPH → impaired Glutathione (GSH) function → RBCs unprotected from oxidizing agents (e.g., sulfonamides, naphthalene)." },
                { id: 34, topic: "Genetics: Acetylation", front: "What risks do slow acetylators face?", back: "Peripheral neuropathy from Isoniazid (INH); Lupus from Hydralazine/Procainamide; Bladder cancer from beta-naphthalene." },
                { id: 35, topic: "Environmental", front: "How does crowding affect Amphetamine toxicity?", back: "The LD50 decreases (toxicity increases) when animals are crowded ('living conditions' factor)." },

                // --- Part 3: Cardiovascular Drugs ---
                { id: 36, topic: "Digitalis", front: "What is the mechanism of toxicity?", back: "Inhibits Na-K-ATPase → Increased intracellular Ca (inotropic) and extracellular K." },
                { id: 37, topic: "Digitalis", front: "How does potassium correlate with toxicity?", back: "Acute overdose: Hyperkalemia.\nChronic toxicity: Hypokalemia." },
                { id: 38, topic: "Digitalis", front: "What are the specific visual symptoms?", back: "Green-yellow halos, blurred vision." },
                { id: 39, topic: "Digitalis Mgmt", front: "What is the specific antidote?", back: "Digoxin immune Fab." },
                { id: 40, topic: "Digitalis Mgmt", front: "How is arrhythmia treated?", back: "Lidocaine (ventricular), Beta-blockers (supraventricular), Atropine (bradycardia). Potassium (if hypokalemic)." },
                { id: 41, topic: "Digitalis Warning", front: "What happens if you give K+ in hyperkalemia?", back: "Can cause heart block terminating in sinus arrest." },
                { id: 42, topic: "Beta-Blockers", front: "What are the mechanisms of overdose?", back: "Beta-blockade + Membrane stabilizing activity (quinidine-like) → myocardial depression." },
                { id: 43, topic: "Beta-Blockers", front: "What is the 'paradoxical' effect of high doses with ISA?", back: "Tachycardia and hypertension (due to Intrinsic Sympathomimetic Activity)." },
                { id: 44, topic: "Beta-Blockers Mgmt", front: "What is the treatment of choice for hemodynamically compromised patients?", back: "Glucagon." },
                { id: 45, topic: "Beta-Blockers Mgmt", front: "Why is Lavage preferred over Emesis?", back: "Because of the possibility of beta-blocker seizures." },

                // --- Part 4: CNS Stimulants ---
                { id: 46, topic: "Amphetamine", front: "Mechanism of Action?", back: "Releases catecholamines (Epi, NE, Dopamine) and inhibits reuptake." },
                { id: 47, topic: "Amphetamine", front: "What is a major contributing cause of death?", back: "Hyperpyrexia (Temp > 109°F / 42.8°C)." },
                { id: 48, topic: "Amphetamine", front: "How are hallucinations described?", back: "Usually unpleasant.\nChronic use = Auditory.\nAcute dose = Visual." },
                { id: 49, topic: "Amphetamine Mgmt", front: "Drug of choice for Psychosis?", back: "Phenothiazines (e.g., Chlorpromazine) → treats psychosis, reverses hyperthermia/convulsions/HTN." },
                { id: 50, topic: "Theophylline", front: "Mechanism of Toxicity?", back: "1. Increased intracellular Calcium.\n2. Accumulation of cAMP.\n3. Adenosine receptor blockade." },
                { id: 51, topic: "Theophylline Mgmt", front: "How are seizures treated?", back: "First line: Diazepam (often fails).\nSecond line: Phenobarbitone." },
                { id: 52, topic: "Theophylline Mgmt", front: "How are arrhythmias treated?", back: "Propranolol or Verapamil." },
                { id: 53, topic: "Camphor", front: "Onset and lipid solubility?", back: "Highly lipid soluble; enters CNS quickly (symptoms in 5–15 min)." },
                { id: 54, topic: "Camphor Mgmt", front: "What is the immediate action?", back: "Immediate emesis or lavage (lavage until odor is gone)." },
                { id: 55, topic: "Camphor Mgmt", front: "Seizure control?", back: "Diazepam is preferred over barbiturates (less respiratory depression)." },

                // --- Part 5: CNS Depressants ---
                { id: 56, topic: "Barbiturates", front: "Compare Short-acting vs. Long-acting toxicity.", back: "Short-acting (e.g., Pentobarbital) are more lipid soluble, more toxic, and harder to dialyze.\nLong-acting (Phenobarbital) are easier to remove via dialysis/alkaline diuresis." },
                { id: 57, topic: "Barbiturates", front: "Mechanism of action?", back: "GABA-like effect or stimulation of GABA release." },
                { id: 58, topic: "Barbiturates", front: "What is the major cause of early death?", back: "Respiratory depression." },
                { id: 59, topic: "Barbiturates", front: "What is a serious thermal effect?", back: "Hypothermia (direct action on thermoregulatory center)." },
                { id: 60, topic: "Benzodiazepines", front: "Why are they safer?", back: "High therapeutic index; massive doses rarely cause general anesthesia." },
                { id: 61, topic: "Benzodiazepines", front: "Specific Antidote?", back: "Flumazenil (antagonist)." },
                { id: 62, topic: "Chloral Hydrate", front: "Active metabolite?", back: "Trichloroethanol." },
                { id: 63, topic: "Antihistamines", front: "Symptoms in Children vs Adults?", back: "Adults: Sedation/Coma + Anticholinergic signs.\nChildren: CNS stimulation, hallucinations, convulsions, hyperpyrexia." },
                { id: 64, topic: "General Mgmt", front: "Why monitor kidneys in CNS depressant OD?", back: "Renal failure causes 1/6th of all deaths (due to shock/hypoxia)." },

                // --- Part 6: Drugs of Abuse ---
                { id: 65, topic: "Opioids", front: "Classic Triad of overdose?", back: "Coma, Miosis (pinpoint pupils), Respiratory depression (2–4 breaths/min)." },
                { id: 66, topic: "Opioids", front: "Mechanism of action (Receptors)?", back: "μ (Mu): Analgesia, euphoria, resp depression, miosis.\nδ (Delta): Dysphoria, hallucinations." },
                { id: 67, topic: "Opioids Mgmt", front: "Drug of Choice?", back: "Naloxone." },
                { id: 68, topic: "Opioids Mgmt", front: "Why monitor for 24-48 hours after Naloxone?", back: "Respiratory depression lasts longer than Naloxone’s effect." },
                { id: 69, topic: "Diphenoxylate", front: "Symptoms in Children?", back: "Early anticholinergic effects (hyperpyrexia, flushing) followed by opioid effects (coma, miosis)." },
                { id: 70, topic: "Fentanyl", front: "Unique symptom?", back: "Chest wall rigidity." },
                { id: 71, topic: "Pentazocine", front: "How does CV response differ from other opioids?", back: "High doses cause increased BP and Heart Rate (tachycardia)." },
                { id: 72, topic: "Cocaine", front: "Mechanism of Toxicity?", back: "Blocks reuptake of Norepinephrine, Dopamine, and Serotonin." },
                { id: 73, topic: "Cocaine", front: "Major cardiovascular features?", back: "Sinus tachycardia, hypertension, ventricular arrhythmias." },
                { id: 74, topic: "Cocaine Mgmt", front: "Treatment for Seizures?", back: "Diazepam (1st choice). Phenobarbital (if inadequate)." },
                { id: 75, topic: "Cocaine Mgmt", front: "Treatment for HTN/Tachycardia?", back: "Propranolol (beta-blocker)." },
                { id: 76, topic: "Cocaine Mgmt", front: "Treatment for Psychosis?", back: "Neurologic agents or Lithium." },
                { id: 77, topic: "Marijuana", front: "Active ingredient and absorption?", back: "THC. Rapid via inhalation. Oral absorption is low (5-10%)." },
                { id: 78, topic: "Marijuana", front: "Management?", back: "Supportive. 'Talk down' period for panic/hallucinations." }
            ];

            const [currentIndex, setCurrentIndex] = useState(0);
            const [isFlipped, setIsFlipped] = useState(false);
            const [direction, setDirection] = useState(0);
            const [touchStart, setTouchStart] = useState(null);
            const [touchEnd, setTouchEnd] = useState(null);

            const minSwipeDistance = 50;

            const onTouchStart = (e) => {
                setTouchEnd(null);
                setTouchStart(e.targetTouches[0].clientX);
            };

            const onTouchMove = (e) => {
                setTouchEnd(e.targetTouches[0].clientX);
            };

            const onTouchEnd = () => {
                if (!touchStart || !touchEnd) return;
                const distance = touchStart - touchEnd;
                const isLeftSwipe = distance > minSwipeDistance;
                const isRightSwipe = distance < -minSwipeDistance;

                if (isLeftSwipe) {
                    handleNext();
                } else if (isRightSwipe) {
                    handlePrev();
                }
            };

            const handleNext = () => {
                if (currentIndex < flashcardsData.length - 1) {
                    setDirection(1);
                    setIsFlipped(false);
                    setTimeout(() => {
                        setCurrentIndex(prev => prev + 1);
                        setDirection(0);
                    }, 200);
                }
            };

            const handlePrev = () => {
                if (currentIndex > 0) {
                    setDirection(-1);
                    setIsFlipped(false);
                    setTimeout(() => {
                        setCurrentIndex(prev => prev - 1);
                        setDirection(0);
                    }, 200);
                }
            };

            const handleFlip = () => {
                setIsFlipped(!isFlipped);
            };

            const handleReset = () => {
                setCurrentIndex(0);
                setIsFlipped(false);
            };

            // Keyboard navigation
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.key === 'ArrowRight') handleNext();
                    if (e.key === 'ArrowLeft') handlePrev();
                    if (e.key === ' ' || e.key === 'Enter') handleFlip();
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [currentIndex]);

            const progress = ((currentIndex + 1) / flashcardsData.length) * 100;
            const currentCard = flashcardsData[currentIndex];

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-4" dir="ltr">
                    
                    {/* Header */}
                    <div className="w-full max-w-md mb-6 flex items-center justify-between">
                        <div>
                            <h1 className="text-2xl font-bold text-gray-900 flex items-center gap-2">
                            <span className="text-blue-600"><Icons.BookOpen /></span>
                            Toxicology Review
                            </h1>
                            <p className="text-sm text-gray-500 mt-1">Post-Midterm • {flashcardsData.length} Cards</p>
                        </div>
                        <div className="text-sm font-medium bg-blue-100 text-blue-700 px-3 py-1 rounded-full whitespace-nowrap">
                            {currentIndex + 1} / {flashcardsData.length}
                        </div>
                    </div>

                    {/* Progress Bar */}
                    <div className="w-full max-w-md bg-gray-200 h-2 rounded-full mb-8 overflow-hidden">
                        <div 
                            className="bg-blue-600 h-full transition-all duration-300 ease-out"
                            style={{ width: `${progress}%` }}
                        />
                    </div>

                    {/* Card Container */}
                    <div 
                        className="relative w-full max-w-md h-96 perspective-1000 group cursor-pointer"
                        onClick={handleFlip}
                        onTouchStart={onTouchStart}
                        onTouchMove={onTouchMove}
                        onTouchEnd={onTouchEnd}
                    >
                        <div className={`relative w-full h-full duration-500 preserve-3d transition-all ${
                            isFlipped ? 'rotate-y-180' : ''
                        } ${
                            direction === 1 ? '-translate-x-10 opacity-0' : direction === -1 ? 'translate-x-10 opacity-0' : ''
                        }`}
                        >
                            {/* Front Face */}
                            <div className="absolute w-full h-full backface-hidden bg-white border border-gray-200 rounded-2xl shadow-xl flex flex-col items-center justify-center p-6 text-center hover:shadow-2xl transition-shadow select-none">
                                
                                <div className="absolute top-6 left-1/2 transform -translate-x-1/2">
                                    <span className="inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-600 uppercase tracking-wide">
                                        <span className="w-3 h-3"><Icons.Layers /></span>
                                        {currentCard.topic}
                                    </span>
                                </div>

                                <h2 className="text-xl md:text-2xl font-semibold leading-relaxed text-gray-800 mt-6">
                                    {currentCard.front}
                                </h2>
                                
                                <div className="absolute bottom-6 text-sm text-gray-400 animate-pulse">
                                    Tap to reveal
                                </div>
                            </div>

                            {/* Back Face */}
                            <div className="absolute w-full h-full backface-hidden rotate-y-180 bg-slate-800 text-white rounded-2xl shadow-xl flex flex-col items-center justify-center p-6 text-center select-none">
                                
                                <div className="absolute top-6 left-1/2 transform -translate-x-1/2">
                                    <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold bg-slate-700 text-slate-300 uppercase tracking-wide">
                                        {currentCard.topic}
                                    </span>
                                </div>

                                <div className="overflow-y-auto max-h-[70%] w-full px-2 scrollbar-hide">
                                    <p className="text-lg md:text-xl font-medium leading-relaxed whitespace-pre-line">
                                    {currentCard.back}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Controls */}
                    <div className="flex items-center justify-center w-full max-w-md mt-10 px-4 h-16 select-none">
                        {currentIndex === flashcardsData.length - 1 ? (
                             <button 
                             onClick={(e) => { e.stopPropagation(); handleReset(); }}
                             className="flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-xl shadow-lg hover:bg-green-700 active:scale-95 transition-all font-bold"
                           >
                             <Icons.RotateCcw />
                             Reset
                           </button>
                        ) : (
                            <div className="flex items-center gap-3 text-gray-400 text-sm font-medium opacity-60">
                                <span className="w-4 h-4 animate-bounce-left"><Icons.ChevronLeft /></span>
                                <span>Swipe to Navigate</span>
                                <span className="w-4 h-4 animate-bounce-right"><Icons.ChevronRight /></span>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ToxicologyFlashcards />);
    </script>
</body>
</html>
